<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../css/style.css">
  <title>Пример 18 - Календарь</title>
</head>

<body>
  <div class="container"></div>

  <script>
    function createCalendar(elem, year, moonth) {
      elem = document.querySelector(elem) // параметр элемент, полученный, с помощью querySelector

      let mon = moonth - 1; // создаем переменную mon, добавляем в нее параметр месяц. тк отчет идет с 0, то в переменную добавляем месяц - 1. Получается 0 - январь, 11 - декабрь. А месяц мы вписывается привычно для нас - от 1 до 12
      let d = new Date(year, mon) // здесь хранится дата, создаем ее с помощью new Date(). в ней передаем параметр year и переменную mon, которую мы создали для конвертации стандартного для js отчета на привычный нам для ввода

      let table = `
        <caption>${moonth}.${year}</caption>
        <table>
          <tr>
            <th>пн</th>
            <th>вт</th>
            <th>ср</th>
            <th>чт</th>
            <th>пт</th>
            <th>сб</th>
            <th>вс</th>
          </tr>
          <tr>
      `;
        // Теперь нам нужно получить пустые окошки до 1го числа месяца
      for(let i=0; i<getDay(d); i++) { // создаем цикл от 0 до переменной d, то есть всю дату, которую чуть ранее создали
        table += '<td></td>' // добавляем в нашу таблицу пустые ячейки, то есть td, которые будут заполнять таблицу до 1го числа
      }
      // Теперь нам нужно написать генератор всех дней
      while(d.getMonth() == mon) { // Полчаем месяц даты, которая была создана, и до тех пор пока она равна mon
        table += '<td>' + d.getDate() + '</td>' // То к таблице добавляем ячейку с числом дня.
        // Теперь нам нужно проверить что неделя закончилась и нам нужно создавать следующую строку
        if(getDay(d) % 7 == 6) { // если нашу дату поделить на 7 и проверить остаток. если остаток равен 6. То есть если воскресенье
          table += '</tr><tr>' // то закрываем строку и открываем следующую строку для заполнения следующих дней
        }
        d.setDate(d.getDate()+1) //Выводим дни через +1
      }
      // Теперь добавим пустые ячейки в конец месяца  
      if(getDay(d) !=0) { // проверяем не равен ли день 0. Это нужно чтобы понять, что у нас не понедельник и не создавать пустые ячейки на целую неделю
        for(let i=getDay(d); i<7; i++) { // Делаем цикл от последнего дня созданной даты до 7, то есть воскресенья
        table += '<td></td>'
      }
      }

      table += '</tr></table>'
      elem.innerHTML = table
    }

    function getDay (date) { // Создаем функцию getDay, которая будет конвертировать стандарт для js, в котором отчет начинается с вс - на удобный нам, начинающийся с пн
      let day = date.getDay(); // в переменной day получаем день через метод getDay
      if(day == 0) day = 7; // если day равен 0 (то есть воскресенье, по умолчанию в js), то присваиваем ему 7 b 
      return day - 1; // И возвращаем из функции день -1, 
      // Т.О. мы конвертируем стандарт для js в одобный для нас формат, начинающийся с пн, а не с вс
    }

    createCalendar('body', 2022, 11)
  </script>
</body>

</html>